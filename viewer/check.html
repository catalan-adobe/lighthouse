<html>
  <body style="font-family: Arial, Helvetica, sans-serif;">
    <h2>Access Lighthouse Report</h1>
    <script>
      const u = new URL(location.href);
      const jsonurl = u.searchParams.get('jsonurl');
      if (jsonurl) {
        fetch(jsonurl, {
          redirect: 'manual',
          credentials: 'include',
        }).then((resp) => {
          if (!resp.ok) {
            const u = new URL(jsonurl);
            const h3 = document.createElement('h3');
            h3.innerHTML = `You first need to login to <a href="${u.origin}" target="_blank">${u.origin}</a> and then reload this page.`;
            document.body.appendChild(h3);
          } else {
            window.location.href = `/lighthouse/viewer/?jsonurl=${jsonurl}`;
          }
        }).catch((err) => {
          console.log('check err', err);
        });
      }
    </script>
  </body>
</html>
